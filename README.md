## アプリケーション概要

### アプリケーション名 
  TechMatch

### アプリケーションの概要(コンセプト)
  
  「セミナーや勉強会に参加してエンジニアと繋がるのは気が重い。マッチングアプリは安心感にかける。
  だけど、プログラミングの勉強を一緒にしたり情報共有ができるエンジニア仲間と繋がりたい。」
  そんなエンジニアさんの背中を押すために開発したサービスです。

  また、サブテーマとして「カジュアルなエンジニアとの出会いを通して、会社にマッチする人材を低コストで採用したい。」と考える会社の人事の方や社長さんにも使って頂けるようなサービスを目指しました。


## アプリケーションの利用方法

### URL(デプロイ)
https://techmatch-app.com/

### テスト用アカウント
トップページにて、「ゲストログイン」をクリックして頂くとテストユーザーでログインすることができます。

### 具体的な利用方法

①ログイン
トップページヘッダー部分の「ゲストログイン」をクリック頂くとログインできます。
また、新規登録や通常ログインも可能です。

②ユーザーとチャット
トップページの「すぐチャットできるユーザー」欄のユーザーアイコンor名前をクリック頂くと、ユーザー詳細ページに遷移します。
そこで、「チャット開始ボタン」をクリック頂くとチャットページに遷移します。
チャットページでは、メッセージのやり取りやビデオ通話が可能です。

※(現在、ビデオ通話に関しては本番環境でwebカメラが上手く起動しないエラーが発生しております。挙動に関しては、下記のGIF動画を参照して頂けると幸いです。)

![demo](https://gyazo.com/c470083ff5e28cc517fd85e0ab428578/raw)

(デバイスの設定を行うと自身のwebカメラが起動する仕組みになっております。その後、相手のPeer IDを入力してCallボタンをクリックするとビデオ通話が開始する仕組みです。)


③ユーザー検索
ユーザー検索ページでは、繋がりたい条件に合ったユーザーを見つけることができます。
検索結果に表示されるカードのアイコンあるいは名前をクリック頂くと、詳細ページに遷移します。

④ユーザーのフォロー
ユーザー詳細ページでは、フォローができるようになっております。相互フォロー状態になると、非同期でチャット開始ボタンが出現する仕組みになっております。

⑤掲示板(タイムライン)
ヘッダーの「掲示板を見に行く」ボタンから掲示板一覧ページに遷移することが可能です。
掲示板では、不特定多数に向けて発信を行うことができます。
また、自身が投稿した内容であれば編集・削除が可能となっております。

⑥マイページ
ヘッダーのユーザー名をクリック頂き、「アカウント詳細」をクリックして頂くとマイページに遷移します。
自身のユーザー情報を確認したり、編集することが可能です。

⑦ログアウト
⑥と同様に、ヘッダーのユーザー名→「ログアウト」からログアウトすることが可能です。


## 要件定義

### 要件定義を行うにあたって目指した課題解決

エンジニアと繋がりたいという思いを抱くエンジニアの「マッチングまでのハードルの高さ」を解消すること。
また、業種・使用言語・学習歴など多様なエンジニアが混在する中でも自分に合った人とマッチングできることを念頭に要件定義を行いました。

### ①チャット機能
目的:マッチングしたいユーザーと気軽にテキストでやり取りができるようにするため。
詳細: 相互フォロー状態である場合のみ、1対1のトークルームでやり取りできます。また、JSによる非同期通信を用いてストレスを低減しています。

### ②ビデオ通話機能
目的: 実際に合うのが難しい(地理的・コロナ的問題など)、あるいは、まだ合うのはちょっと不安といったユーザーの心理的負荷を解消するため。
詳細: トークルームにて、専用ボタンのワンクリックでビデオ通話画面に遷移する仕様。skywayのAPIを利用しました。

### ③フォロー機能
目的: 相互フォローを通してユーザーとのやり取りを可能にすることで、アプリの安全性を高める役割。
詳細: ユーザーは気になった人にフォローリクエストを送ることができます。それに対して相手が許可(フォロー)すると、トークルームが作成されて1対1のやり取りが可能になります。
acts_as_folloerというgemを用いて実装しました。

### ④ユーザー詳細・編集機能
目的: ユーザーの詳細情報を知る機会を設けることで、安心してコンタクトを取れるようにするため。また、自分のプロフィール情報を都度更新できるようにするため。
詳細: ユーザーの居住地・学んでいる言語・職種(SES,自社開発,学生など)などを確認することができます。自身のユーザー詳細ページでは、編集が可能です。

### ⑤ユーザー検索機能
目的: マッチングしたいユーザーを見つけるため。
詳細: 言語の指定(rubyやphpやjavaなど)や職種指定(SES,自社開発,学生など)や開発歴(独学中、〇〇スクール在籍、実務◯年)等でフィルターをかけ、自分が繋がりたい人を見つけることができます。

### ⑥掲示板(タイムライン)投稿機能
目的: 不特定多数に向けた発信を可能にすることで、複数人とマッチすることを可能にするため。
詳細: もくもく会や飲み会、企業セミナーといった多種多様なイベントへの呼びかけが行われることを想定しています。また、一緒にイベントに行く仲間を探す際にも利用できるようにする予定です。

### ⑦掲示板(タイムライン)編集機能
目的: 投稿ミスの修正や追記を可能にするため。
詳細: 自分が投稿した掲示板では、編集ボタンが現れるようにして編集ページに移れるようにします。

### ⑧掲示板(タイムライン)削除機能
目的: ボードに記述した呼びかけが必要なくなった際に、情報を削除できるようにするため。
詳細: 編集機能と同様、ボタンリンクから移れるようにします。

### ⑨ユーザー管理機能(新規登録・ログイン・ログアウト)
目的: マッチングに最低限必要な情報をDBに保存するため。また、サイトの安全性を高めるため。
詳細: ヘッダーにリンクを設置します。新規登録では、「本名・メールアドレス・パスワード・職歴/学歴・居住地・学んでいる言語・利用目的・自己紹介欄など」を記入します。(登録はウィザード形式を採用)
ログイン時は、「メールアドレスとパスワード」を記入。twitter・gooleログインも可能にする予定です。また、1人のユーザーが複数のアカウントを持つことができない仕組みを取り入れようと考えています。


### 今後実装する予定の機能

### ⑩ユーザーレビュー機能
目的: その人の信頼性を可視化することで、悪質なユーザーとのマッチ率を減らすため。レビュー機能を設けることで、不適切な発言や行動を抑止効果を生むため。
詳細: 形式は、★による5段階評価＋コメントをできるようにする予定です。ただ人間レビューには、抵抗感を感じる人も多いかもしれないので実装は慎重に考えたいと思います。

### ⑪掲示板の検索機能
目的: 自分が気になるカテゴリーの掲示板を素早く見つけられるようにするため。
詳細: 掲示板一覧ページに検索ボタンを設置する予定です。タグを条件に検索できるようにしようと思っています。

### ⑫掲示板コメント機能
目的: 投稿に関する疑問点などをユーザーが確認できるようにするため。
詳細: 掲示板に「コメントを追加」ボタンを設置する予定です。

### ⑬チャットメッセージの削除機能
目的: 間違えて送ってしまった情報を削除できるようにするため。
詳細: 自分が投稿したメッセージにカーソルを合わせると削除リンクが生成されるようにする予定です。

### ⑭ユーザー削除機能
目的: サービスを利用しなくなったユーザー情報を不用意に表示しないようにするため。
詳細: マイページ詳細に削除ボタンを設置する形で実装する予定です。

### ⑮通報機能
目的: サービスの利用目的に沿っていないユーザーを排除してサイトの安全性を担保するため。
詳細: ①不適切な投稿内容を見つけた際に、通報してもらう。→ ②サービス管理者側が審査をする。→ ③場合によっては投稿者のアカウントを凍結させる。といった流れを実現するための機能を実装予定です。


## DB設計

### usersテーブル

| Column   | Type   | Options     |
| -------- | ------ | ----------- |
| name     | string | null: false |
| email    | string | null: false |
| password | string | null: false |
※別途ユーザー画像をActive Storageで実装しております。

#### Association
- has_many :entries
- has_many :rooms, through: entries
- has_many :messages
- has_one :details
- has_many :posts

### entriesテーブル

| Column | Type       | Options                        |
| ------ | ---------- | ------------------------------ |
| user   | references | null: false, foreign_key: true |
| room   | references | null: false, foreign_key: true |

#### Association
- belongs_to :user
- belongs_to :room

### roomsテーブル

| Column | Type       | Options                        |
| ------ | ---------- | ------------------------------ |
| user   | references | null: false, foreign_key: true |

#### Association
- has_many :entries
- has_many :messages
- has_many :users, through: entries

### followsテーブル

| Column       | Type       | Options                        |
| ------------ | ---------- | ------------------------------ |
| followable   | references | null: false, polymorphic: true |
| follower     | references | null: false, polymorphic: true |
| blocked      | boolean    | default: false, null: false    |

### messagesテーブル

| Column  | Type       | Options                        |
| ------- | ---------- | ------------------------------ |
| content | text       | null: false                    |
| user    | references | null: false, foreign_key: true |
| room    | references | null: false, foreign_key: true |

#### Association
- belongs_to :room
- belongs_to :user

### detailsテーブル

| Column        | Type       | Options                       |
| ------------- | ---------- | ----------------------------- |
| age           | integer    | null: false                   |
| area_id       | integer    | null: false                   |
| occupation_id | integer    | null: false                   |
| genre_id      | integer    |                               |
| school        | string     |                               |
| experience_id | integer    |                               |
| language_id   | integer    |                               |
| interest_id   | integer    | null: false                   |
| pr            | text       | null: false                   |
| user          | references | null: false, foreign_key: true|

#### Association
- belongs_to :user

### postsテーブル

| Column     | Type       | Options                        |
| ---------- | ---------- | ------------------------------ |
| title      | string     | null: false                    |
| content    | text       | null: false                    |
| date       | date       |                                |
| time_first | time       |                                |
| time_end   | time       |                                |
| people     | integer    |                                |
| user       | references | null: false, foreign_key: true |

#### Association
- belongs_to :user
- has_many :post_tag_relations
- has_many :tags, through: post_tag_relations 

### post_tag_relationsテーブル

| Column | Type       | Options                        |
| ------ | ---------- | ------------------------------ |
| post   | references | null: false, foreign_key: true |
| tag    | references | null: false, foreign_key: true |

#### Association
- belongs_to :post
- belongs_to :tag

### tagsテーブル

| Column | Type   | Options                       |
| ------ | ------ | ----------------------------- |
| name   | string | null: false, uniqueness: true |

#### Association
- has_many :post_tag_relations
- has_many :posts, through: :post_tag_relations

### ER図

https://gyazo.com/72b4cf41a15f6f16b5c396e3d9411565


### ローカルでの動作方法

以下の手順で問題なくローカル環境で動作できるかと思います。

% git clone https://github.com/maekawa-kazuma/techmatch.git
% cd techmatch
% bundle install
% yarn install

※ railsはバージョン6.0.0を利用しております。
